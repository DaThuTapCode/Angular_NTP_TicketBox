<div class="container-fluid  justify-content-center bg-dark">
  <!-- <div class="w-100"> -->
  <div class="row p-5 bg-light rounded shadow-sm ">
    <h1 *ngIf="theater" class="text-center text-green">Quản lý phòng chiếu {{theater.name}}</h1>
    <hr style="color: black;">
    <div class="col-lg-4 text-dark">
      <form action="">
        <div class="row">
          <!-- <h1 class="text-center text-green mb-4">Tạo phòng chiếu mới</h1> -->
          <div class="col-lg-12">
            <div class="form-group mb-3">
              <label for="name">Tên phòng chiếu</label>
              <input [(ngModel)]="screenNew.name" class="form-control" type="text" name="name" id="name">
            </div>
            <div class="form-group mb-3">
              <label for="type">Loại phòng chiếu</label>
              <input [(ngModel)]="screenNew.type" class="form-control" type="text" name="type" id="type">
            </div>
          </div>
        </div>
        <button class="btn btn-success" (click)="createScreen()">Create</button>
      </form>
    </div>
    <div class="col-lg-8">
      <div class="col-md-12">
        <div class="form-group mb-6 text-dark">
          <label for="name">Chọn phòng chiếu</label>
          <select class="form-select mb-6" (change)="onChangeScreens($event)">
            <option value="">Chọn màn hình</option>
            <option *ngFor="let sc  of screensList" [value]="sc">{{sc.name}}</option>
          </select>
        </div>
        <button *ngIf="screenIsSelectd" type="button" class="btn btn-primary mt-5" data-toggle="modal"
          data-target="#exampleModal">
          Thêm ghế nhanh
        </button>
      </div>
      <div class="mb-4">
        <h2 class="text-warning text-center ">Xem trước bố cục phòng chiếu</h2>
        <div class="table-responsive">
          <div class="col-lg-12 zone text-dark py-5">
            <div class="screen">Màn hình</div>
            <div class="text-white ">
              <h4>*Các loại ghế</h4>
              <div class="row">
                <div class="col-lg-3">
                  <div class="row">
                    <div class="seat"> <i class="fa-solid fa-chair text-dark"></i></div>
                    Ghế thường
                  </div>
                </div>
                <div class="col-lg-3">
                  <div class="row">
                    <div class="seat reserved"> <i class="fa-solid fa-chair text-dark"></i></div>
                    Ghế đã bán
                  </div>
                </div>
                <div class="col-lg-3">
                  <div class="row">
                    <div class="seat available"><i class="fa-solid fa-chair text-dark"></i></div>
                    Ghế có thể chọn
                  </div>
                </div>
                <div class="col-lg-3">
                  <div class="row">
                    <div class="seat selected"><i class="fa-solid fa-chair text-dark"></i></div>
                    Ghế đang chọn
                  </div>
                </div>
              </div>

              <div class="row ">
                <div class="col-lg-3 ">
                  <div class="row">
                    <div class="seat "> <i class="fa-solid fa-couch text-dark"></i></div>
                    Ghế VIP
                  </div>
                </div>

                <div class="col-lg-3 ">
                  <div class="row">
                    <div class="COUPLE "> <i class="fa-solid fa-couch text-dark"></i> <i class="fa-solid fa-couch text-dark"></i></div>
                    Ghế Đôi
                  </div>
                </div>

                <div class="col-lg-3 ">
                  <div class="row">
                    <div class="seat NULL text-dark"><i class="fa-solid fa-eye-slash"></i> </div>
                    Ghế Bị ẩn ở phía người dùng
                  </div>
                </div>


              </div>
            </div>

            <div *ngFor="let row of groupSeatBRow | keyvalue" class="row ">
              <div class="seat-row justify-content-center">
                <h3 class="text-green" style="padding-right: 10px;">{{ row.key }}</h3>
                <div title="{{seat.type}} {{row.key}}{{seat.seatnumber}}" class="seat" *ngFor="let seat of row.value"
                  [ngClass]="seat.status" [ngClass]="seat.type" (click)="loadDetailSeat(seat)" data-toggle="modal"
                  data-target="#modalUpdateTypeSeat">
                  <div *ngIf="seat.type === 'STANDARD' ">
                    <i class="fa-solid fa-chair"></i>
                  </div>
                  <div *ngIf="seat.type === 'VIP' ">
                    <i class="fa-solid fa-couch"></i>
                  </div>
                  <div *ngIf="seat.type === 'COUPLE' ">
                    <i class="fa-solid fa-couch"></i>
                    <i class="fa-solid fa-couch"></i>
                  </div>
                  <div *ngIf="seat.type === 'NULL' ">
                    <i class="fa-solid fa-eye-slash"></i>
                  </div>
                </div>
                <h3 class="text-green" style="padding-right: 10px;">{{ row.key }}</h3>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- </div> -->


<!--Modal update type seat-->
<div *ngIf="seatIsSelected" class="modal fade text-dark " id="modalUpdateTypeSeat" tabindex="-1" role="dialog"
  aria-labelledby="modalUpdateTypeSeatTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalUpdateTypeSeatTitle">Chỉnh sửa ghế {{
          seatIsSelected.seatrow}}{{seatIsSelected.seatnumber}} </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-3">
            <input [(ngModel)]="seatIsSelected.type" (change)="onchangeRadioSeatType($event)" value="NULL" type="radio"
              id="null"> <label for="null">> NULL</label>
          </div>
          <div class="col-lg-3">
            <input [(ngModel)]="seatIsSelected.type" (change)="onchangeRadioSeatType($event)" value="STANDARD"
              type="radio" id="standard"> <label for="standard"> > STANDARD</label>
          </div>
          <div class="col-lg-3">
            <input [(ngModel)]="seatIsSelected.type" (change)="onchangeRadioSeatType($event)" value="COUPLE"
              type="radio" id="couple"> <label for="couple"> > COUPLE</label>
          </div>
          <div class="col-lg-3">
            <input [(ngModel)]="seatIsSelected.type" (change)="onchangeRadioSeatType($event)" value="VIP" type="radio"
              id="vip"> <label for="vip"> > VIP</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger" (click)="deleteSeat(seatIsSelected.id)">Delete</button>
        </div>
    </div>
  </div>
</div>


<!-- Modal Add seat-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-green" id="exampleModalLabel">Thêm ghế nhanh</h5>
        <div class="text-dark">
          <input type="radio" [(ngModel)]="isTypeAddSeat" name="type-create" [value]="true" id="type-create1">
          <label for="type-create1">Thêm bình thường (Từng ghế 1)</label>
          <br>
          <input type="radio" [(ngModel)]="isTypeAddSeat" name="type-create" [value]="false" id="type-create2">
          <label for="type-create2">Thêm nhanh</label>
        </div>
      </div>
      <div class="modal-body text-dark">
        <form *ngIf="isTypeAddSeat">
          <h5>Form thêm bình thường</h5>
          <div class="row">
            <div class="col-lg-4">
              <label for="seatrow1" class="font-weight-bold">Hàng ghế</label>
              <input type="text" class="form-control" name="seatrow1" id="seatrow1" [(ngModel)]="seatNew.seatrow">
            </div>
            <div class="col-lg-4">
              <label for="seatnumber1" class="font-weight-bold">Ghế số</label>
              <input type="number" class="form-control" name="seatnumber1" id="seatnumber1"
                [(ngModel)]="seatNew.seatnumber">
            </div>
            <div class="col-lg-4">
              <label for="type1" class="font-weight-bold">Loại ghế</label>
              <select name="type1" id="type1" class="form-select" [(ngModel)]="seatNew.type">
                <option value="STANDARD">STANDARD (Ghế thường)</option>
                <option value="VIP">VIP (Ghế VIP)</option>
                <option value="COUPLE">COUPLE (Ghế đôi)</option>
                <option value="NULL">NULL (Ghế NULL có tác dụng ẩn ghế xây dựng bố cục rạp)</option>
              </select>
            </div>
          </div>
        </form>

        <form *ngIf="!isTypeAddSeat">
          <h5>Form thêm nhanh</h5>
          <div class="row">
            <div class="col-lg-3">
              <label for="seatrow2" class="font-weight-bold">Hàng ghế bắt đầu</label>
              <input type="text" class="form-control" name="seatrow2" id="seatrow2" [(ngModel)]="seatNew.seatrow">
            </div>
            <div class="col-lg-3">
              <label for="seatrow3" class="font-weight-bold">Hàng ghế kết thúc</label>
              <input type="text" class="form-control" name="seatrow3" id="seatrow3" [(ngModel)]="seatNew.seatnumber">
            </div>
            <div class="col-lg-3">
              <label for="seatnumber2" class="font-weight-bold">Số ghế mỗi hàng</label>
              <input type="number" class="form-control" name="seatnumber2" id="seatnumber2"
                [(ngModel)]="seatNew.seatnumber">
            </div>
            <div class="col-lg-3">
              <label for="type2" class="font-weight-bold">Loại ghế</label>
              <select name="type2" id="type2" class="form-select" [(ngModel)]="seatNew.type">
                <option value="STANDARD">STANDARD (Ghế thường)</option>
                <option value="VIP">VIP (Ghế VIP)</option>
                <option value="COUPLE">COUPLE (Ghế đôi)</option>
                <option value="NULL">NULL (Ghế NULL có tác dụng ẩn ghế xây dựng bố cục rạp)</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="createSeat()">Create seat</button>
      </div>
    </div>
  </div>
</div>