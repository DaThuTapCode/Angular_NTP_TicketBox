<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="container">
    <!-- <h1 class="text-center text-white mt-5">Chọn thời gian và địa điểm</h1> -->
     
    <div class="row">
      <div class="col-md-11 mt-2">
        <small><img style="border-radius: 10px; box-shadow: 5px 10px;" class="img-movie mb-2" [src]="movie.image" [alt]="movie.description"></small>
        <h5 *ngIf="this.movie" class="text-dark ">Phim: {{movie.title}} <br> Ngày: {{ this.showdate | date: 'dd-MM-yyyy'}} <br> Thời lượng phim: {{ movie.duration }} phút</h5>
      </div>
    </div>
    <h3 class="color-green mt-3">Danh sách rạp có suất chiếu</h3>
  
    <hr style="color: #72BE42; height: 5px;">
  
    <div class="row">
  
      <div class="col-lg-9">
        <small class="text-danger">*Quý khách vui lòng kiểm tra kỹ địa chỉ và thông tin rạp trước khi chọn vé</small>

        <div class="text-name-theater text-danger" *ngIf="theaterNames.length === 0">
          <h5>*Không có suất chiếu nào cho hôm nay</h5>
        </div>
        <div class="" *ngFor="let theaterName of theaterNames">
          <h4 class="text-center text-white">{{ theaterName }}</h4>
          <table class="table table-sm table-dark theater-name">
            <thead>
              <tr>
                <!-- <th>ID Show time</th> -->
                <th>Screen</th>
                <th>Địa chỉ rạp</th>
                <th>Giờ chiếu</th>
                <th>Ngày chiếu</th>
                <th>Tên Phim</th>
                <th>Hành động</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let showtime of groupedShowtimes[theaterName]">
                <!-- <td>{{ showtime.id }}</td> -->
                <td>{{ showtime.screen?.name }}</td>
                <td>{{ showtime.screen?.theater?.location }}</td>
                <td>{{ showtime.showtime }}</td>
                <td>{{ showtime.showdate | date: 'dd-MM-yyyy' }}</td>
                <td>{{ showtime.movie?.title }}</td>
                <td>
                  <!-- <button class="btn btn-success"(click)="redirectToScreens(showtime)">
                    <i class="fa-solid fa-ticket"></i> Đặt vé
                  </button> -->
                  <a class="btn btn-success"
                    [routerLink]="['/screen', showtime.movie?.id, showtime.screen?.id, showtime.id]">
                    <i class="fa-solid fa-ticket"></i> Đặt vé
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-lg-3">
        <mat-form-field appearance="fill">
          <mat-label>Chọn ngày</mat-label>
          <input readonly="true" matInput [matDatepicker]="picker" [min]="todayn" [(ngModel)]="minDate"
            (dateChange)="onDateChange($event)">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>
    </div>
  </div>
</body>
</html>